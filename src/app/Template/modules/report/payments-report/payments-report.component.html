<div class="w-full h-full  rounded-xl p-[10px] bg-white flex gap-[10px]">
    <div
        class="border-solid pr-[20px] border-r-[2px] border-slate-300 w-[22%] h-full  rounded-l-xl pt-[35px] flex flex-col items-center ">

        <form [formGroup]="invoiceSelection" class="w-full ">
            <mat-form-field class="w-full">
                <mat-label>REPORT TYPE</mat-label>
                <mat-select formControlName="selectedOpt" name="report" class="font-mono">
                    <mat-option  class="font-semibold font-mono" *ngFor="let option of reports"
                        [value]="option.value">{{option.viewValue|uppercase}}</mat-option>
                </mat-select>
            </mat-form-field>

            <mat-form-field class="w-full" *ngIf="invoiceSelection.get('selectedOpt')?.value==='voucherReprint'">
                <mat-label>VOUCHER REF NUMBER</mat-label>

                <input type="text" placeholder="RefNo" matInput formControlName="refNo" [formControl]="purchaseInvoiceControl"
                    [matAutocomplete]="auto">
                <mat-error *ngIf="invoiceSelection.get('refNo')?.hasError">This field is required!</mat-error>
                <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
                    <mat-option class="font-semibold font-mono" *ngFor="let anItem of filterOptionPurchase | async" 
                        (onSelectionChange)=" getTheSelectedInvoiceId(anItem.confirmPurchaseId)" [value]="anItem.purchaseInvoice">

                        {{anItem.purchaseInvoice}} | {{anItem.vendorOBJ.vendorName}}
                    </mat-option>
                </mat-autocomplete>
            </mat-form-field>

            <mat-form-field class="w-full" *ngIf="invoiceSelection.get('selectedOpt')?.value==='receiptReprint'">
                <mat-label>RECEIPT REF NUMBER</mat-label>

                <input type="text" placeholder="RefNo" matInput formControlName="refNo" [formControl]="salesInvoiceNoControl"
                    [matAutocomplete]="auto">
                <mat-error *ngIf="invoiceSelection.get('refNo')?.hasError">This field is required!</mat-error>
                <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
                    <mat-option class="font-semibold font-mono" *ngFor="let anItem of filterOptions | async" 
                        (onSelectionChange)=" getTheSelectedInvoiceId(anItem.confirmInvoiceId)" [value]="anItem.invoiceNumber">

                        {{anItem.invoiceNumber}} | {{anItem.customerOBJ.custName}}
                    </mat-option>
                </mat-autocomplete>
            </mat-form-field>

            <mat-form-field class="w-full" *ngIf="invoiceSelection.get('selectedOpt')?.value==='purchaseReport'">
                <mat-label>Enter a date range</mat-label>
                <mat-date-range-input [formGroup]="range" [rangePicker]="picker">
                    <input matStartDate formControlName="start" placeholder="Start date">
                    <input matEndDate formControlName="end" placeholder="End date">
                </mat-date-range-input>

                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-date-range-picker #picker></mat-date-range-picker>
                <mat-error *ngIf="range.get('end')?.hasError">End Date is required!</mat-error>
                <mat-error *ngIf="range.get('start')?.hasError">Start Date field is required!</mat-error>


            </mat-form-field>

            <!-- <p class="m-[5px]">Selected range: {{range.value | json}}</p> -->
        </form>
        <section class="w-[100%] flex flex-col gap-[5px]">
            <div class="w-full flex flex-col justify-center items-center">
                <button mat-raised-button class="w-[95%]" color="primary" (click)="generateReport()">Generate
                    Report</button>
            </div>
            <div class="w-full flex flex-col justify-center items-center">
                <button mat-raised-button class="w-[95%]" color="warn" (click)="printReport()">Print Report</button>
            </div>
        </section>
    </div>

    <div class="border-solid  w-[78%]  rounded-r-xl overflow-auto">

        <ng-container *ngIf="!isReportGenerated" class="">
            <div class="w-full h-full grid justify-center align-middle items-center">
                <app-empty-report></app-empty-report>
            </div>
        </ng-container>

        <ng-container *ngIf="isReportGenerated && this.invoiceSelection.get('selectedOpt')?.value=='voucherReprint'">

            <div class="table-cont flex justify-center">
                <ag-grid-angular class="ag-theme-alpine user-table cursor-pointer" 
                [paginationAutoPageSize]="true"
                style="margin-bottom: 1rem; height: 50vh; width: 76vw" 
                [rowData]="purchaseInvoiceRowData$| async"
                [columnDefs]="voucherDef" 
                [rowSelection]="rowSelection" 
                (cellClicked)="onCellClicked($event)"
                (gridReady)="onGridVoucherDataReady($event)" 
                [pagination]="true">
                </ag-grid-angular>
            </div>
        </ng-container>

        <ng-container *ngIf="isReportGenerated && this.invoiceSelection.get('selectedOpt')?.value=='receiptReprint'">
            <div class="table-cont flex justify-center">
                
                <ag-grid-angular class="ag-theme-alpine user-table cursor-pointer" 
                [paginationAutoPageSize]="true"
                style="margin-bottom: 1rem; height: 50vh; width: 76vw" 
                [rowData]="salesInvoiceRowData$ | async"     
                [columnDefs]="receiptDef" 
                [rowSelection]="rowSelection" 
                (cellClicked)="onCellClicked($event)"
                (gridReady)="onGridReceiptDataReady($event)"
                [pagination]="true">
                </ag-grid-angular>
            </div>
        </ng-container>
        <!-- <ng-container *ngIf="isReportGenerated">
            <app-report-template id="stockTemp" [inputData]="dataToSet"></app-report-template>
        </ng-container> -->
    </div>
</div>