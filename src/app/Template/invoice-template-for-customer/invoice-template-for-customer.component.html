<section class="h-[80vh]">
   <ng-container *ngIf="productCartItems.length>0"> 
   <mat-dialog-actions align="center">
    <button mat-raised-button  color="basic" (click)="makePayment()">Make a payment</button>
        <button mat-raised-button  color="primary" (click)="completeInvoice()">Confirm Invoice</button>
   </mat-dialog-actions>
   <div id="invoice" style="width: 100%;"  class="">
    <mat-dialog-content class=" mx-auto p-6 bg-white rounded shadow-sm !max-h-fit">
        <div class="border-t-2 pt-4 text-sm text-black mt-16 text-center">Comfort Linen Company (Pvt) Ltd</div>
        <div class="grid grid-cols-2 items-center">
          <div>
            <!--  Company logo  -->
            <img src="../../../assets/logo/logo2.png" alt="company-logo" height="100" width="100">
          </div>
      
          <div class="text-right">
           
            <p class="text-gray-500 text-sm">
                33/24 Hekita Lane, Wattala 11300
            </p>
            <p class="text-gray-500 text-sm mt-1">
                0112 985 400
            </p>
          </div>
        </div>
      
        <!-- Client info -->
        <div class="grid grid-cols-2 items-center mt-8">
          <div>
            <p class="font-bold text-gray-800">
              Bill to :
            </p>
            <p class="text-gray-500">
                {{this.selectedCustomer.custName}}
              <br />
              {{this.selectedCustomer.address}}
            </p>
            <p class="text-gray-500">
                {{this.selectedCustomer.email}}
            </p>
            <p class="text-gray-500">
                {{this.selectedCustomer.contact}}
            </p>
          </div>
      
          <div class="text-right">
            <p class="">
              Invoice number:
              <span class="text-gray-500">#{{this.invoiceNumber}}</span>
            </p>
            <p>
              Invoice date: <span class="text-gray-500">{{this.today}}</span>
              
            </p>
          </div>
        </div>
      
        <!-- Invoice Items -->
        <div class="-mx-4 mt-8 flow-root sm:mx-0 w-full">
          <table class="min-w-full  w-full">
            <colgroup>
              <col class="w-full sm:w-1/2">
              <col class="sm:w-1/6">
              <col class="sm:w-1/6">
              <col class="sm:w-1/6">
            </colgroup>
            <thead class="border-b border-gray-300 text-gray-900">
              <tr>
                <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0">Items</th>
                <th scope="col" class="hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 sm:table-cell">Quantity</th>
                <th scope="col" class="hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 sm:table-cell">Price</th>
                <th scope="col" class="hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 sm:table-cell">Discount</th>
                <th scope="col" class="py-3.5 pl-3 pr-4 text-right text-sm font-semibold text-gray-900 sm:pr-0">Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of productCartItems" class="border-b border-gray-200">
                <td class="max-w-0 py-5 pl-4 pr-3 text-sm sm:pl-0">
                  <div class="font-medium text-gray-900">{{item.stockOBJ.itemName}}</div>
                  <!-- <div class="mt-1 truncate text-gray-500">Laravel based e-commerce platform.</div> -->
                </td>
                <td class="hidden px-3 py-5 text-right text-sm text-gray-500 sm:table-cell">{{(item.quantity).toFixed(2)}}</td>
                <td class="hidden px-3 py-5 text-right text-sm text-gray-500 sm:table-cell">{{(item.stockOBJ.sellingPrice).toFixed(2)}}</td>
                <td class="hidden px-3 py-5 text-right text-sm text-gray-500 sm:table-cell">{{((item.discount/item.stockOBJ.sellingPrice)*100).toFixed(2)+"%"}}</td>
                <td class="py-5 pl-3 pr-4 text-right text-sm text-gray-500 sm:pr-0">{{(item.netAmount).toFixed(2)}}</td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <th scope="row" colspan="4" class="hidden pl-4 pr-3 pt-6 text-right text-sm font-normal text-gray-500 sm:table-cell sm:pl-0">No. of Products</th>
                <th scope="row" class="pl-6 pr-3 pt-6 text-right text-sm font-normal text-gray-500 sm:hidden">No. of Products</th>
                <td class="pl-3 pr-6 pt-6 text-right text-sm text-gray-500 sm:pr-0">{{this.productCartItems.length}}</td>
              </tr>
              <tr>
                <th scope="row" colspan="4" class="hidden pl-4 pr-3 pt-4 text-right text-sm font-semibold text-gray-900 sm:table-cell sm:pl-0">Total</th>
                <th scope="row" class="pl-6 pr-3 pt-4 text-left text-sm font-semibold text-gray-900 sm:hidden">Total</th>
                <td class="pl-3 pr-4 pt-4 text-right text-sm font-semibold text-gray-900 sm:pr-0">{{(this.total).toFixed(2)}}</td>
              </tr>
              <tr>
                <th scope="row"  colspan="4" class="hidden pl-4 pr-3 pt-4 text-right text-sm font-normal text-gray-500 sm:table-cell sm:pl-0">Paid Amount</th>
                <th scope="row" class="pl-6 pr-3 pt-4 text-left text-sm font-normal text-gray-500 sm:hidden">Paid Amount</th>
                <td class="pl-3 pr-6 pt-4 text-right text-sm text-gray-500 sm:pr-0">{{(this.paidAmount).toFixed(2)}}</td>
              </tr>
              <tr>
                <th scope="row" colspan="4" class="hidden pl-4 pr-3 pt-4 text-right text-sm font-semibold text-gray-500 sm:table-cell sm:pl-0">Balance</th>
                <th scope="row" class="pl-6 pr-3 pt-4 text-left text-sm font-semibold text-gray-500 sm:hidden">Balance</th>
                <td class="pl-3 pr-4 pt-4 text-right text-sm font-semibold text-gray-500 sm:pr-0">{{((this.total)-(this.paidAmount)).toFixed(2)}}</td>
              </tr>
            </tfoot>
          </table>
        </div>
      
        <!-- Invoice Items -->
        <!-- <div class="-mx-4 mt-8 flow-root sm:mx-0 w-full">
          <table class="min-w-full  w-full">
            <colgroup>
              <col class="w-full sm:w-1/2">
              <col class="sm:w-1/6">
              <col class="sm:w-1/6">
              <col class="sm:w-1/6">
            </colgroup>
            <thead class="border-b border-gray-300 text-gray-900">
              <tr>
                <th scope="col" class="py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-0">Items</th>
                <th scope="col" class="hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 sm:table-cell">Quantity</th>
                <th scope="col" class="hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 sm:table-cell">Price</th>
                <th scope="col" class="hidden px-3 py-3.5 text-right text-sm font-semibold text-gray-900 sm:table-cell">Discount</th>
                <th scope="col" class="py-3.5 pl-3 pr-4 text-right text-sm font-semibold text-gray-900 sm:pr-0">Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of productCartItems" class="border-b border-gray-200">
                <td class="max-w-0 py-5 pl-4 pr-3 text-sm sm:pl-0">
                  <div class="font-medium text-gray-900">{{item.stockOBJ.itemName}}</div>
               
                </td>
                <td class="hidden px-3 py-5 text-right text-sm text-gray-500 sm:table-cell">{{(item.quantity).toFixed(2)}}</td>
                <td class="hidden px-3 py-5 text-right text-sm text-gray-500 sm:table-cell">{{(item.stockOBJ.sellingPrice).toFixed(2)}}</td>
                <td class="hidden px-3 py-5 text-right text-sm text-gray-500 sm:table-cell">{{((item.discount/item.stockOBJ.sellingPrice)*100).toFixed(2)+"%"}}</td>
                <td class="py-5 pl-3 pr-4 text-right text-sm text-gray-500 sm:pr-0">{{(item.netAmount).toFixed(2)}}</td>
              </tr>
            </tbody>
            <tfoot>
              <tr>
                <th scope="row" colspan="4" class="hidden pl-4 pr-3 pt-6 text-right text-sm font-normal text-gray-500 sm:table-cell sm:pl-0">No. of Products</th>
                <th scope="row" class="pl-6 pr-3 pt-6 text-right text-sm font-normal text-gray-500 sm:hidden">No. of Products</th>
                <td class="pl-3 pr-6 pt-6 text-right text-sm text-gray-500 sm:pr-0">{{this.productCartItems.length}}</td>
              </tr>
              <tr>
                <th scope="row" colspan="4" class="hidden pl-4 pr-3 pt-4 text-right text-sm font-semibold text-gray-900 sm:table-cell sm:pl-0">Total</th>
                <th scope="row" class="pl-6 pr-3 pt-4 text-left text-sm font-semibold text-gray-900 sm:hidden">Total</th>
                <td class="pl-3 pr-4 pt-4 text-right text-sm font-semibold text-gray-900 sm:pr-0">{{(this.total).toFixed(2)}}</td>
              </tr>
              <tr>
                <th scope="row"  colspan="4" class="hidden pl-4 pr-3 pt-4 text-right text-sm font-normal text-gray-500 sm:table-cell sm:pl-0">Paid Amount</th>
                <th scope="row" class="pl-6 pr-3 pt-4 text-left text-sm font-normal text-gray-500 sm:hidden">Paid Amount</th>
                <td class="pl-3 pr-6 pt-4 text-right text-sm text-gray-500 sm:pr-0">{{(this.paidAmount).toFixed(2)}}</td>
              </tr>
              <tr>
                <th scope="row" colspan="4" class="hidden pl-4 pr-3 pt-4 text-right text-sm font-semibold text-gray-500 sm:table-cell sm:pl-0">Balance</th>
                <th scope="row" class="pl-6 pr-3 pt-4 text-left text-sm font-semibold text-gray-500 sm:hidden">Balance</th>
                <td class="pl-3 pr-4 pt-4 text-right text-sm font-semibold text-gray-500 sm:pr-0">{{((this.total)-(this.paidAmount)).toFixed(2)}}</td>
              </tr>
            </tfoot>
          </table>
        </div>
       -->
        <!--  Footer  -->
        <div class="border-t-2 pt-4 text-xs text-gray-500 text-center mt-16">
       Thank you!
        </div>
      
    </mat-dialog-content>
   </div>
   
   
    <mat-dialog-actions align="center" >
        <button mat-raised-button (click)="openPDF()" color="warn" >Print</button>
    </mat-dialog-actions>
</ng-container>
<ng-container *ngIf="productCartItems.length <= 0">
    <mat-dialog-content class="bg-purple-100">
        <div class="text-lg text-black font-sans text-center">
           Add Products!
        </div>
        <div class="text-sm text-gray-500 font-sans text-center">
            No Products has been added into the Cart. <br>
            Add Products to generate an Invoice! 
        </div>
    </mat-dialog-content>
</ng-container>
</section>